{% comment %}
  Altum Home Section
  Clean, candles-first layout with:
  - Hero (eyebrow, heading, subheading, 2 buttons)
  - Shop-by-category cards (blocks)
  - Featured product (candle by default)
  - Brand story band
  - Newsletter sign-up
{% endcomment %}

<section class="altum-home" data-section-id="{{ section.id }}">
  <div class="altum-home__inner">

    {%- comment -%}
      HERO
    {%- endcomment -%}
    <div class="altum-home__hero">
      <div class="altum-home__hero-copy">
        {% if section.settings.eyebrow != blank %}
          <p class="altum-home__eyebrow">
            {{ section.settings.eyebrow }}
          </p>
        {% endif %}

        {% if section.settings.heading != blank %}
          <h1 class="altum-home__heading">
            {{ section.settings.heading }}
          </h1>
        {% endif %}

        {% if section.settings.subheading != blank %}
          <p class="altum-home__subheading">
            {{ section.settings.subheading }}
          </p>
        {% endif %}

        <div class="altum-home__hero-actions">
          {% if section.settings.primary_button_link != blank and section.settings.primary_button_label != blank %}
            <a
              href="{{ section.settings.primary_button_link }}"
              class="altum-btn altum-btn--primary"
            >
              {{ section.settings.primary_button_label }}
            </a>
          {% endif %}

          {% if section.settings.secondary_button_link != blank and section.settings.secondary_button_label != blank %}
            <a
              href="{{ section.settings.secondary_button_link }}"
              class="altum-btn altum-btn--ghost"
            >
              {{ section.settings.secondary_button_label }}
            </a>
          {% endif %}
        </div>

        {% if section.settings.hero_footnote != blank %}
          <p class="altum-home__hero-footnote">
            {{ section.settings.hero_footnote }}
          </p>
        {% endif %}
      </div>

      <div class="altum-home__hero-media">
        {% if section.settings.hero_image %}
          {{ section.settings.hero_image | image_url: width: 900 | image_tag:
            loading: 'lazy',
            class: 'altum-home__hero-image',
            alt: section.settings.heading | escape
          }}
        {% else %}
          <div class="altum-home__hero-placeholder">
            <span>Colorado-made candles &amp; gear</span>
          </div>
        {% endif %}

        <div class="altum-home__hero-stats">
          <div class="altum-home__stat">
            <span class="altum-home__stat-label">Made in</span>
            <span class="altum-home__stat-value">Colorado</span>
          </div>
          <div class="altum-home__stat">
            <span class="altum-home__stat-label">Key scent</span>
            <span class="altum-home__stat-value">Black Rose + Oud</span>
          </div>
          <div class="altum-home__stat">
            <span class="altum-home__stat-label">Mood</span>
            <span class="altum-home__stat-value">Cabin after dark</span>
          </div>
        </div>
      </div>
    </div>

    {%- comment -%}
      SHOP BY CATEGORY (blocks)
    {%- endcomment -%}
    {% if section.blocks.size > 0 %}
      <section class="altum-home__section altum-home__section--categories">
        {% if section.settings.collections_heading != blank %}
          <h2 class="altum-home__section-heading">
            {{ section.settings.collections_heading }}
          </h2>
        {% endif %}

        <div class="altum-home__categories-grid">
          {% for block in section.blocks %}
            {% if block.type == 'collection_card' %}
              {% assign card_collection = block.settings.collection %}
              <article class="altum-category-card" {{ block.shopify_attributes }}>
                <div class="altum-category-card__body">
                  <p class="altum-category-card__eyebrow">
                    {{ block.settings.eyebrow | default: card_collection.title }}
                  </p>
                  <h3 class="altum-category-card__title">
                    {{ block.settings.title | default: card_collection.title }}
                  </h3>
                  {% if block.settings.text != blank %}
                    <p class="altum-category-card__text">
                      {{ block.settings.text }}
                    </p>
                  {% endif %}
                </div>

                <div class="altum-category-card__footer">
                  {% if card_collection %}
                    <a
                      href="{{ card_collection.url }}"
                      class="altum-btn altum-btn--pill"
                    >
                      {{ block.settings.button_label | default: 'Shop ' | append: card_collection.title }}
                    </a>
                  {% endif %}
                </div>
              </article>
            {% endif %}
          {% endfor %}
        </div>
      </section>
    {% endif %}

    {%- comment -%}
      FEATURED PRODUCT (candle)
    {%- endcomment -%}
    {% if section.settings.featured_product %}
      {% assign fp = section.settings.featured_product %}
      <section class="altum-home__section altum-home__section--featured">
        <div class="altum-featured">
          <div class="altum-featured__media">
            {% if fp.featured_image %}
              {{ fp.featured_image | image_url: width: 800 | image_tag:
                loading: 'lazy',
                class: 'altum-featured__image',
                alt: fp.title | escape
              }}
            {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'altum-featured__placeholder' }}
            {% endif %}
          </div>
          <div class="altum-featured__content">
            {% if section.settings.featured_eyebrow != blank %}
              <p class="altum-featured__eyebrow">
                {{ section.settings.featured_eyebrow }}
              </p>
            {% endif %}

            <h2 class="altum-featured__title">
              {{ fp.title }}
            </h2>

            {% if section.settings.featured_text != blank %}
              <p class="altum-featured__text">
                {{ section.settings.featured_text }}
              </p>
            {% endif %}

            <p class="altum-featured__price">
              {% if fp.compare_at_price > fp.price %}
                <span class="altum-featured__price-current">
                  {{ fp.price | money }}
                </span>
                <span class="altum-featured__price-compare">
                  {{ fp.compare_at_price | money }}
                </span>
              {% else %}
                <span class="altum-featured__price-current">
                  {{ fp.price | money }}
                </span>
              {% endif %}
            </p>

            <a href="{{ fp.url }}" class="altum-btn altum-btn--primary">
              {{ section.settings.featured_button_label | default: 'View product' }}
            </a>
          </div>
        </div>
      </section>
    {% endif %}

    {%- comment -%}
      BRAND STORY
    {%- endcomment -%}
    <section class="altum-home__section altum-home__section--story">
      <div class="altum-story">
        <div class="altum-story__copy">
          {% if section.settings.story_eyebrow != blank %}
            <p class="altum-story__eyebrow">
              {{ section.settings.story_eyebrow }}
            </p>
          {% endif %}

          {% if section.settings.story_heading != blank %}
            <h2 class="altum-story__heading">
              {{ section.settings.story_heading }}
            </h2>
          {% endif %}

          {% if section.settings.story_text != blank %}
            <p class="altum-story__text">
              {{ section.settings.story_text }}
            </p>
          {% endif %}

          {% if section.settings.story_button_label != blank and section.settings.story_button_link != blank %}
            <a
              href="{{ section.settings.story_button_link }}"
              class="altum-btn altum-btn--ghost"
            >
              {{ section.settings.story_button_label }}
            </a>
          {% endif %}
        </div>
      </div>
    </section>

    {%- comment -%}
      NEWSLETTER
    {%- endcomment -%}
    <section class="altum-home__section altum-home__section--newsletter">
      <div class="altum-newsletter">
        <div class="altum-newsletter__copy">
          {% if section.settings.newsletter_eyebrow != blank %}
            <p class="altum-newsletter__eyebrow">
              {{ section.settings.newsletter_eyebrow }}
            </p>
          {% endif %}

          {% if section.settings.newsletter_heading != blank %}
            <h2 class="altum-newsletter__heading">
              {{ section.settings.newsletter_heading }}
            </h2>
          {% endif %}

          {% if section.settings.newsletter_text != blank %}
            <p class="altum-newsletter__text">
              {{ section.settings.newsletter_text }}
            </p>
          {% endif %}
        </div>

        <div class="altum-newsletter__form">
          {% form 'customer', id: 'altum-home-newsletter' %}
            <input type="hidden" name="contact[tags]" value="newsletter, altum-home" />
            <div class="altum-newsletter__fields">
              <input
                type="email"
                name="contact[email]"
                class="altum-input"
                value="{{ form.email }}"
                placeholder="Enter your email"
                required
              />
              <button type="submit" class="altum-btn altum-btn--primary">
                {{ section.settings.newsletter_button_label | default: 'Get updates' }}
              </button>
            </div>
            {% if form.errors %}
              <p class="altum-newsletter__message altum-newsletter__message--error">
                {{ form.errors | default_errors }}
              </p>
            {% elsif form.posted_successfully? %}
              <p class="altum-newsletter__message altum-newsletter__message--success">
                {{ section.settings.newsletter_success | default: 'Thanks for signing up.' }}
              </p>
            {% endif %}
          {% endform %}
        </div>
      </div>
    </section>

  </div>
</section>

{% schema %}
{
  "name": "Altum Home",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Hero eyebrow",
      "default": "Colorado-made candles & gear, refined"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Hero heading",
      "default": "Explore the heights of adventure. Sink into the depths of comfort."
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Hero subheading",
      "default": "ALTUM curates adventure-ready pants, off-grid solar power, and small-batch Colorado candles—so your time on the mountain and your time at home feel equally dialed in."
    },
    {
      "type": "text",
      "id": "primary_button_label",
      "label": "Primary button label",
      "default": "Shop candles"
    },
    {
      "type": "url",
      "id": "primary_button_link",
      "label": "Primary button link"
    },
    {
      "type": "text",
      "id": "secondary_button_label",
      "label": "Secondary button label",
      "default": "Explore all products"
    },
    {
      "type": "url",
      "id": "secondary_button_link",
      "label": "Secondary button link"
    },
    {
      "type": "textarea",
      "id": "hero_footnote",
      "label": "Hero footnote",
      "default": "Small-batch pours, tested on the Front Range, packed for life between climbs and cabin nights."
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero image"
    },
    {
      "type": "text",
      "id": "collections_heading",
      "label": "Collections heading",
      "default": "Shop by category"
    },
    {
      "type": "product",
      "id": "featured_product",
      "label": "Featured product (candle recommended)"
    },
    {
      "type": "text",
      "id": "featured_eyebrow",
      "label": "Featured product eyebrow",
      "default": "Featured candle"
    },
    {
      "type": "textarea",
      "id": "featured_text",
      "label": "Featured product copy",
      "default": "Hand-poured soy wax in an 8oz amber jar with notes of Black Rose + Oud—our signature Colorado-night scent."
    },
    {
      "type": "text",
      "id": "featured_button_label",
      "label": "Featured product button label",
      "default": "Shop this candle"
    },
    {
      "type": "text",
      "id": "story_eyebrow",
      "label": "Story eyebrow",
      "default": "Meet the people behind ALTUM"
    },
    {
      "type": "text",
      "id": "story_heading",
      "label": "Story heading",
      "default": "Born in Colorado. Built for life between summits and slow nights in."
    },
    {
      "type": "textarea",
      "id": "story_text",
      "label": "Story text",
      "default": "ALTUM is run by two climbers who moved west for longer approaches, bluebird days, and star-lit nights. We design candles, gear, and layers that keep the mountains in your rhythm—even when you’re home."
    },
    {
      "type": "text",
      "id": "story_button_label",
      "label": "Story button label",
      "default": "Read the Altum story"
    },
    {
      "type": "url",
      "id": "story_button_link",
      "label": "Story button link"
    },
    {
      "type": "text",
      "id": "newsletter_eyebrow",
      "label": "Newsletter eyebrow",
      "default": "Stay in the loop"
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter heading",
      "default": "Colorado nights, in your inbox."
    },
    {
      "type": "textarea",
      "id": "newsletter_text",
      "label": "Newsletter text",
      "default": "Be the first to know about new candle runs, gear drops, and field notes from the Front Range."
    },
    {
      "type": "text",
      "id": "newsletter_button_label",
      "label": "Newsletter button label",
      "default": "Get the Altum brief"
    },
    {
      "type": "text",
      "id": "newsletter_success",
      "label": "Newsletter success message",
      "default": "Thanks for signing up. See you at golden hour."
    }
  ],
  "blocks": [
    {
      "type": "collection_card",
      "name": "Collection card",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "text",
          "id": "eyebrow",
          "label": "Eyebrow",
          "default": "Restore"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Colorado-made candles"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "default": "Hand-poured in Colorado. Clean-burning, mountain-inspired, crafted for calm after adventure."
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop candles"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Altum Home",
      "category": "Custom"
    }
  ]
}
{% endschema %}
